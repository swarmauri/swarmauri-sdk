batches:
  - batch:
      name: "project setup"
      desc: "initialize a project"
      commands:
        - ["init", "project", "{tmpdir}/project1"]
  - batch:
      name: "remote sort"
      desc: "run sort remotely and fetch the result"
      commands:
        - ["remote", "--gateway-url", "https://gw.peagen.com", "sort", "tests/examples/projects_payloads/template_two_project.yaml"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "task", "get", "{task_id}"]
  - batch:
      name: "remote secrets"
      desc: "login and manage secrets via the gateway"
      commands:
        - ["login", "--gateway-url", "https://gw.peagen.com"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "secrets", "add", "test_secret", "secret_value"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "secrets", "get", "test_secret"]
  - batch:
      name: "remote doe and evolve"
      desc: "process DOE spec then evolve and check status"
      commands:
        - ["login", "--gateway-url", "https://gw.peagen.com"]
        - ["keys", "fetch-server", "--gateway-url", "https://gw.peagen.com"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "doe", "process", "tests/examples/gateway_demo/doe_spec.yaml", "tests/examples/gateway_demo/template_project.yaml", "--output", "{tmpdir}/payload.yaml"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "evolve", "tests/examples/simple_evolve_demo/evolve_remote_spec.yaml", "--watch"]
        - ["remote", "--gateway-url", "https://gw.peagen.com", "task", "get", "{task_id}"]
